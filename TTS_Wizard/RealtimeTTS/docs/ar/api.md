## التكوين

### معلمات التهيئة لـ `TextToAudioStream`

عند تهيئة فئة `TextToAudioStream`، لديك خيارات متعددة لتخصيص سلوكها. إليك المعلمات المتاحة:

#### `engine` (BaseEngine)
- **النوع**: BaseEngine
- **مطلوب**: نعم المحرك الأساسي المسؤول عن تحويل النص إلى صوت. يجب عليك تقديم نسخة من `BaseEngine` أو أحد فروعها لتمكين توليف الصوت.

#### `on_text_stream_start` (قابل للاستدعاء)
- **النوع**: دالة قابلة للاستدعاء
- **مطلوب**: لا يتم استدعاء هذه الدالة الاختيارية عند بدء تدفق النص. استخدمه لأي إعداد أو تسجيل قد تحتاجه.

#### `on_text_stream_stop` (قابل للاستدعاء)
- **النوع**: دالة قابلة للاستدعاء
- **مطلوب**: لا يتم تفعيل هذه الدالة الراجعة الاختيارية عند انتهاء تدفق النص. يمكنك استخدام هذا لمهام التنظيف أو التسجيل.

#### `on_audio_stream_start` (قابل للاستدعاء)
- **النوع**: دالة قابلة للاستدعاء
- **مطلوب**: لا يتم استدعاء هذه الدالة الاختيارية عند بدء تدفق الصوت. مفيد لتحديثات واجهة المستخدم أو تسجيل الأحداث.

#### `on_audio_stream_stop` (قابل للاستدعاء)
- **النوع**: دالة قابلة للاستدعاء
- **مطلوب**: لا تُستدعى هذه الدالة الاختيارية عند توقف تدفق الصوت. مثالي لتنظيف الموارد أو مهام المعالجة اللاحقة.

#### `on_character` (callable)
السياق: - **النوع**:  
النص للترجمة: - **النوع**: دالة قابلة للاستدعاء
- **مطلوب**: لا تُستدعى هذه الدالة الاختيارية عند معالجة حرف واحد.

#### `output_device_index` (int)
- **النوع**: عدد صحيح
- **مطلوب**: لا يحدد فهرس جهاز الإخراج الذي سيتم استخدامه. لا أحد يستخدم الجهاز الافتراضي.

#### `tokenizer` (string)
- **النوع**: سلسلة
- **مطلوب**: لا
- **افتراضي**: nltk
- **الوصف**: أداة تقسيم الجمل (currently "nltk" and "stanza" are supported).

#### `language` (سلسلة نصية)
- **النوع**: سلسلة نصية
- **مطلوب**: لا اللغة التي يجب استخدامها لتقسيم الجمل.

#### `muted` (bool)
- **النوع**: Bool
- **مطلوب**: لا
- **القيمة الافتراضية**: False
- **الوصف**: المعلمة العالمية الصامتة. إذا كان صحيحًا، فلن يتم فتح أي تدفق pyAudio. يعطل تشغيل الصوت عبر مكبرات الصوت المحلية (في حال كنت تريد التوليف إلى ملف أو معالجة أجزاء الصوت) ويتجاوز إعدادات كتم الصوت في معلمات التشغيل.

#### `level` (int)
- **النوع**: عدد صحيح
- **مطلوب**: لا
- **افتراضي**: `logging.WARNING`
- **الوصف**: يحدد مستوى التسجيل للمدون الداخلي. يمكن أن يكون هذا أي ثابت صحيح من وحدة `logging` المدمجة في بايثون.

النص المراد ترجمته: #### مثال على الاستخدام:

```python
engine = YourEngine()  # استبدل بمحركك
stream = TextToAudioStream(
    engine=engine,
    on_text_stream_start=my_text_start_func,
    on_text_stream_stop=my_text_stop_func,
    on_audio_stream_start=my_audio_start_func,
    on_audio_stream_stop=my_audio_stop_func,
    level=logging.INFO
)
```
### الطرق

#### `play` و `play_async`

هذه الطرق مسؤولة عن تنفيذ تحويل النص إلى صوت وتشغيل تدفق الصوت. الفرق هو أن `play` هي دالة حظر، بينما `play_async` تعمل في خيط منفصل، مما يسمح للعمليات الأخرى بالاستمرار.

السياق:   ##### المعايير:  
النص المراد ترجمته: ##### المعايير:

###### `fast_sentence_fragment` (bool)
- **الافتراضي**: `True`
- **الوصف**: عند تعيينه على `True`، ستعطي الطريقة الأولوية للسرعة، مما يؤدي إلى إنشاء وتشغيل أجزاء الجمل بشكل أسرع. هذا مفيد للتطبيقات التي تكون فيها الكمون مهمًا.

###### `fast_sentence_fragment_allsentences` (bool)
- **الافتراضي**: `خطأ`
- **الوصف**: عند تعيينه إلى `True`، يتم تطبيق معالجة أجزاء الجمل السريعة على جميع الجمل، وليس فقط الجملة الأولى.

###### `fast_sentence_fragment_allsentences_multiple` (bool)
- **افتراضي**: `خطأ`
- **الوصف**: عند تعيينه على `True`، يسمح بإنتاج أجزاء متعددة من الجمل بدلاً من جزء واحد فقط.

###### `buffer_threshold_seconds` (float)
- **الافتراضي**: `0.0`
- **الوصف**: يحدد الوقت بالثواني لعتبة التخزين المؤقت، مما يؤثر على سلاسة واستمرارية تشغيل الصوت.

  - **كيف يعمل**: قبل تركيب جملة جديدة، يتحقق النظام مما إذا كان هناك المزيد من المواد الصوتية المتبقية في المخزن المؤقت أكثر من الوقت المحدد بواسطة `buffer_threshold_seconds`. إذا كان الأمر كذلك، فإنه يسترجع جملة أخرى من مولد النصوص، على افتراض أنه يمكنه جلب وتوليف هذه الجملة الجديدة ضمن الإطار الزمني المتاح من الصوت المتبقي في الذاكرة المؤقتة. تسمح هذه العملية لمحرك تحويل النص إلى كلام بالحصول على مزيد من السياق لتحسين التركيب، مما يعزز تجربة المستخدم.

  قيمة أعلى تضمن وجود المزيد من الصوت المخزن مسبقًا، مما يقلل من احتمال حدوث صمت أو فجوات أثناء التشغيل. إذا كنت تواجه انقطاعات أو توقفات، فكر في زيادة هذه القيمة.

###### `minimum_sentence_length` (int)
- **الافتراضي**: `10`
- **الوصف**: يحدد الحد الأدنى لطول الأحرف لاعتبار سلسلة كنص يجب تصنيعه. هذا يؤثر على كيفية معالجة وتشغيل أجزاء النص.

###### `minimum_first_fragment_length` (int)
- **الافتراضي**: `10`
- **الوصف**: الحد الأدنى لعدد الأحرف المطلوبة للجزء الأول من الجملة قبل التوقف.

###### `log_synthesized_text` (bool)
- **الافتراضي**: `خطأ`
- **الوصف**: عند التفعيل، يسجل أجزاء النص كما يتم تحويلها إلى صوت. مفيد للتدقيق وإصلاح الأخطاء.

###### `reset_generated_text` (bool)
- **الافتراضي**: `True`
- **الوصف**: إذا كان صحيحًا، أعد تعيين النص المُولد قبل المعالجة.

###### `output_wavfile` (str)
- **الافتراضي**: `None`
- **الوصف**: إذا تم تعيينه، احفظ الصوت في ملف WAV المحدد.

###### `on_sentence_synthesized` (قابل للاستدعاء)
- **الافتراضي**: `لا شيء`
- **الوصف**: دالة رد نداء تُستدعى بعد أن يتم تركيب جزء جملة واحد.

###### `before_sentence_synthesized` (callable)
- **Default**: `None`
- **Description**: دالة رد نداء تُستدعى قبل أن يتم تركيب جزء جملة واحد.

###### `on_audio_chunk` (قابل للاستدعاء)
- **الافتراضي**: `لا شيء`
- **الوصف**: دالة الاستدعاء التي تُستدعى عندما يكون جزء الصوت جاهزًا.

###### `tokenizer` (str)
- **الافتراضي**: `"nltk"`
- **الوصف**: المحلل اللغوي المستخدم لتقسيم الجمل. يدعم حاليًا "nltk" و "stanza".

###### `tokenize_sentences` (قابل للاستدعاء)
- **الافتراضي**: `لا شيء`
السياق: - **الوصف**:  
النص للترجمة: - **الوصف**: دالة مخصصة تقوم بتقسيم الجمل من النص المدخل. يمكنك توفير محلل لغوي خفيف الوزن خاص بك إذا لم تكن راضيًا عن nltk وstanza. يجب أن يأخذ النص كسلسلة ويعيد الجمل المقسمة كقائمة من السلاسل.

###### `language` (str)
- **الإعداد الافتراضي**: `"en"`
- **الوصف**: اللغة المستخدمة لتقسيم الجمل.

###### `context_size` (int)
- **الافتراضي**: `12`
- **الوصف**: عدد الأحرف المستخدمة لتحديد السياق لاكتشاف حدود الجمل. سياق أكبر يحسن دقة اكتشاف حدود الجمل.

###### `context_size_look_overhead` (int)
- **الافتراضي**: `12`
- **الوصف**: حجم سياق إضافي للنظر للأمام عند اكتشاف حدود الجمل.

###### `muted` (bool)
- **الإعداد الافتراضي**: `خطأ`
- **الوصف**: إذا كان صحيحًا، يتم تعطيل تشغيل الصوت عبر مكبرات الصوت المحلية. مفيد عندما تريد التوليف إلى ملف أو معالجة مقاطع الصوت دون تشغيلها.

###### `sentence_fragment_delimiters` (str)
- **الإعداد الافتراضي**: `".?!;:,\n…)]}。-"` سلسلة من الأحرف التي تُعتبر محددات للجمل.

###### `force_first_fragment_after_words` (int)
- **الافتراضي**: `15`
- **الوصف**: عدد الكلمات التي يجب بعدها أن يتم تقديم الجزء الأول من الجملة.


